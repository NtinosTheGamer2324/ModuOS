#include "moduos/drivers/graphics/bitmap_font.h"

/* 8x16 font data.
 * For brevity, this includes a minimal readable subset for ASCII 0x20..0x7E.
 * Unimplemented glyphs map to '?'.
 *
 * Each glyph is 16 bytes, MSB-first (bit7 = leftmost).
 */
/* * Modu-Industrial 8x16 Bitmap Font
 * MSB-first, MSB is the leftmost pixel.
 * Unique technical aesthetic for NTS/ModuOS.
 */
static const uint8_t font8x16_basic[96][16] = {
    /* 0x20 ' ' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x21 '!' */ {0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x22 '"' */ {0x36,0x36,0x36,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x23 '#' */ {0x24,0x24,0x7E,0x24,0x7E,0x24,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x24 '$' */ {0x18,0x3E,0x60,0x3C,0x06,0x7C,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x25 '%' */ {0x62,0x66,0x0C,0x18,0x30,0x66,0x46,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x26 '&' */ {0x3C,0x66,0x3C,0x76,0x6C,0x66,0x3B,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x27 ''' */ {0x18,0x18,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x28 '(' */ {0x0C,0x18,0x30,0x30,0x30,0x30,0x18,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x29 ')' */ {0x30,0x18,0x0C,0x0C,0x0C,0x0C,0x18,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x2A '*' */ {0x00,0x18,0xDB,0x7E,0xDB,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x2B '+' */ {0x00,0x10,0x10,0x7C,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x2C ',' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x08,0x10,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x2D '-' */ {0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x2E '.' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x2F '/' */ {0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x30 '0' */ {0x3C,0x46,0x4E,0x56,0x66,0x62,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, 
    /* 0x31 '1' */ {0x18,0x38,0x18,0x18,0x18,0x18,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x32 '2' */ {0x3C,0x42,0x02,0x3C,0x40,0x42,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x33 '3' */ {0x3C,0x42,0x02,0x1C,0x02,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x34 '4' */ {0x08,0x18,0x28,0x48,0x7E,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x35 '5' */ {0x7E,0x40,0x7C,0x02,0x02,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x36 '6' */ {0x3C,0x40,0x40,0x7C,0x42,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x37 '7' */ {0x7E,0x02,0x04,0x08,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x38 '8' */ {0x3C,0x42,0x42,0x3C,0x42,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x39 '9' */ {0x3C,0x42,0x42,0x3E,0x02,0x02,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x3A ':' */ {0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x3B ';' */ {0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x08,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x3C '<' */ {0x0E,0x1C,0x38,0x70,0x38,0x1C,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x3D '=' */ {0x00,0x00,0x7E,0x00,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x3E '>' */ {0x70,0x38,0x1C,0x0E,0x1C,0x38,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x3F '?' */ {0x3C,0x42,0x02,0x0C,0x18,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x40 '@' */ {0x3C,0x42,0x5A,0x5A,0x5A,0x40,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x41 'A' */ {0x18,0x24,0x42,0x42,0x7E,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x42 'B' */ {0x7C,0x42,0x42,0x7C,0x42,0x42,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x43 'C' */ {0x3C,0x42,0x40,0x40,0x40,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x44 'D' */ {0x78,0x4C,0x46,0x46,0x46,0x4C,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x45 'E' */ {0x7E,0x40,0x40,0x78,0x40,0x40,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x46 'F' */ {0x7E,0x40,0x40,0x78,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x47 'G' */ {0x3C,0x42,0x40,0x4E,0x42,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x48 'H' */ {0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x49 'I' */ {0x3C,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x4A 'J' */ {0x1E,0x06,0x06,0x06,0x06,0x46,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x4B 'K' */ {0x42,0x44,0x48,0x70,0x48,0x44,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x4C 'L' */ {0x40,0x40,0x40,0x40,0x40,0x40,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x4D 'M' */ {0x42,0x66,0x5A,0x42,0x42,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x4E 'N' */ {0x42,0x62,0x52,0x4A,0x46,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x4F 'O' */ {0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x50 'P' */ {0x7C,0x42,0x42,0x7C,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x51 'Q' */ {0x3C,0x42,0x42,0x42,0x4A,0x44,0x3A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x52 'R' */ {0x7C,0x42,0x42,0x7C,0x48,0x44,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x53 'S' */ {0x3E,0x40,0x3C,0x02,0x02,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x54 'T' */ {0x7E,0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x55 'U' */ {0x42,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x56 'V' */ {0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x57 'W' */ {0x42,0x42,0x42,0x5A,0x5A,0x66,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x58 'X' */ {0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x59 'Y' */ {0x42,0x42,0x24,0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x5A 'Z' */ {0x7E,0x02,0x04,0x08,0x10,0x20,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x5B '[' */ {0x3C,0x20,0x20,0x20,0x20,0x20,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x5C '\' */ {0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x5D ']' */ {0x3C,0x04,0x04,0x04,0x04,0x04,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x5E '^' */ {0x18,0x24,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x5F '_' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00},
    /* 0x60 '`' */ {0x18,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x61 'a' */ {0x00,0x00,0x3C,0x02,0x3E,0x42,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x62 'b' */ {0x40,0x40,0x7C,0x42,0x42,0x42,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x63 'c' */ {0x00,0x00,0x3C,0x40,0x40,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x64 'd' */ {0x02,0x02,0x3E,0x42,0x42,0x42,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x65 'e' */ {0x00,0x00,0x3C,0x42,0x7E,0x40,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x66 'f' */ {0x1C,0x20,0x70,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x67 'g' */ {0x00,0x00,0x3E,0x42,0x42,0x3E,0x02,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x68 'h' */ {0x40,0x40,0x7C,0x42,0x42,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x69 'i' */ {0x18,0x18,0x00,0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x6A 'j' */ {0x06,0x06,0x00,0x06,0x06,0x06,0x06,0x46,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x6B 'k' */ {0x40,0x40,0x44,0x48,0x70,0x48,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x6C 'l' */ {0x18,0x18,0x18,0x18,0x18,0x18,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x6D 'm' */ {0x00,0x00,0x7E,0x4A,0x4A,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x6E 'n' */ {0x00,0x00,0x7C,0x42,0x42,0x42,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x6F 'o' */ {0x00,0x00,0x3C,0x42,0x42,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x70 'p' */ {0x00,0x00,0x7C,0x42,0x42,0x7C,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x71 'q' */ {0x00,0x00,0x3E,0x42,0x42,0x3E,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x72 'r' */ {0x00,0x00,0x5E,0x60,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x73 's' */ {0x00,0x00,0x3E,0x40,0x3C,0x02,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x74 't' */ {0x20,0x20,0x7E,0x20,0x20,0x22,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x75 'u' */ {0x00,0x00,0x42,0x42,0x42,0x42,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x76 'v' */ {0x00,0x00,0x42,0x42,0x24,0x24,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x77 'w' */ {0x00,0x00,0x42,0x42,0x5A,0x5A,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x78 'x' */ {0x00,0x00,0x42,0x24,0x18,0x24,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x79 'y' */ {0x00,0x00,0x42,0x42,0x42,0x3E,0x02,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x7A 'z' */ {0x00,0x00,0x7E,0x04,0x08,0x10,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x7B '{' */ {0x0E,0x10,0x10,0x30,0x10,0x10,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x7C '|' */ {0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x7D '}' */ {0x70,0x08,0x08,0x0C,0x08,0x08,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x7E '~' */ {0x3B,0x6E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
};

static const uint8_t glyph_question[16] = {0x7C,0xC6,0x0E,0x1C,0x18,0,0x18,0,0,0,0,0,0,0,0,0};

/* Minimal CP437-ish extras for box drawing / faces.
 * We keep the core ASCII table but add a few high-byte glyphs that are useful in shells.
 */
static const uint8_t glyph_full_block[16] = {
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF
};
static const uint8_t glyph_light_shade[16] = {
    0x55,0xAA,0x55,0xAA,0x55,0xAA,0x55,0xAA,0x55,0xAA,0x55,0xAA,0x55,0xAA,0x55,0xAA
};
static const uint8_t glyph_medium_shade[16] = {
    0xEE,0xBB,0xEE,0xBB,0xEE,0xBB,0xEE,0xBB,0xEE,0xBB,0xEE,0xBB,0xEE,0xBB,0xEE,0xBB
};
static const uint8_t glyph_dark_shade[16] = {
    0xFF,0xEE,0xFF,0xBB,0xFF,0xEE,0xFF,0xBB,0xFF,0xEE,0xFF,0xBB,0xFF,0xEE,0xFF,0xBB
};
/* Simple 8x16 smiley (approx) */
static const uint8_t glyph_smiley[16] = {
    0x3C,0x42,0xA5,0x81,0xA5,0x99,0x42,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

/* Real box-drawing glyphs (single-line), 8x16.
 * These are not meant to be pixel-perfect CP437, but should be clearly box-like.
 */
/* Edge-based single-line box drawing.
 * MSB-first: leftmost pixel is bit 7 (0x80), rightmost is bit 0 (0x01).
 */
static const uint8_t glyph_box_h[16]  = {0,0,0,0,0,0,0,0xFF,0xFF,0,0,0,0,0,0,0}; /* 0xC4 ─ */
static const uint8_t glyph_box_v[16]  = {0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80}; /* 0xB3 │ */

static const uint8_t glyph_box_tl[16] = {0,0,0,0,0,0,0,0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80}; /* 0xDA ┌ */
static const uint8_t glyph_box_tr[16] = {0,0,0,0,0,0,0,0xFF,0xFF,0x01,0x01,0x01,0x01,0x01,0x01,0x01}; /* 0xBF ┐ */
static const uint8_t glyph_box_bl[16] = {0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,0xFF,0,0,0,0,0,0,0}; /* 0xC0 └ */
static const uint8_t glyph_box_br[16] = {0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,0xFF,0,0,0,0,0,0,0}; /* 0xD9 ┘ */

static const uint8_t glyph_box_cross[16] = {0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80}; /* 0xC5 ┼ (fallback style) */
static const uint8_t glyph_box_tup[16]   = {0,0,0,0,0,0,0,0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80}; /* 0xC2 ┬ */
static const uint8_t glyph_box_tdn[16]   = {0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,0xFF,0,0,0,0,0,0,0}; /* 0xC1 ┴ */
static const uint8_t glyph_box_tlft[16]  = {0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,0xFF,0x01,0x01,0x01,0x01,0x01,0x01,0x01}; /* 0xB4 ┤ */
static const uint8_t glyph_box_trgt[16]  = {0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80}; /* 0xC3 ├ */


const uint8_t *bitmap_font_glyph8x16(uint8_t ch) {
    /* A few commonly-used CP437 codes */
    switch (ch) {
        case 0x01: return glyph_smiley;       /* ☺ */
        case 0xB0: return glyph_light_shade;  /* ░ */
        case 0xB1: return glyph_medium_shade; /* ▒ */
        case 0xB2: return glyph_dark_shade;   /* ▓ */
        case 0xDB: return glyph_full_block;   /* █ */

        /* Box drawing (CP437 indices) */
        case 0xC4: return glyph_box_h;        /* ─ */
        case 0xB3: return glyph_box_v;        /* │ */
        case 0xDA: return glyph_box_tl;       /* ┌ */
        case 0xBF: return glyph_box_tr;       /* ┐ */
        case 0xC0: return glyph_box_bl;       /* └ */
        case 0xD9: return glyph_box_br;       /* ┘ */
        case 0xC2: return glyph_box_tup;      /* ┬ */
        case 0xC1: return glyph_box_tdn;      /* ┴ */
        case 0xC3: return glyph_box_trgt;     /* ├ */
        case 0xB4: return glyph_box_tlft;     /* ┤ */
        case 0xC5: return glyph_box_cross;    /* ┼ */
        default:
            break;
    }

    if (ch < 0x20 || ch > 0x7E) return glyph_question;
    uint8_t idx = (uint8_t)(ch - 0x20);
    if (idx >= 96) return glyph_question;
    if (idx < (uint8_t)(sizeof(font8x16_basic)/sizeof(font8x16_basic[0]))) {
        return font8x16_basic[idx];
    }
    return glyph_question;
}
